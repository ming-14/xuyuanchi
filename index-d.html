<!DOCTYPE html><html lang="cn"><head><meta charset="UTF-8"><title>盆友圈 坦白说</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=0.4,minimum-scale=1,user-scalable=yes"><script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script><style>*{padding:0;margin:0}html{background-color:#e0ffff;width:100%}.txt{position:absolute;bottom:30px;width:250px;left:0;right:0;margin:auto;height:30px;border:1px solid #ccc;border-radius:5px;text-indent:1em;font-size:13px}.item{width:170px;height:170px;padding:20px;box-sizing:border-box;background:red;border-radius:5px;border-bottom-right-radius:80px 20px;box-shadow:0 0 5px 2px rgba(0,0,0,.2);position:absolute;left:120px;top:80px;word-wrap:break-word;overflow:hidden}.item .close{position:absolute;right:5px;top:2px;cursor:pointer}</style><script src="https://www.lmlblog.com/winter/templets/xq/js/snowy.js"></script><style>.snow-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:100001}</style><div class="snow-container"></div><script src="https://cdn.bootcdn.net/ajax/libs/jsencrypt/3.2.1/jsencrypt.js"></script><body><div id="jsdiv" style="width:100%;height:2500px;position:absolute;background-color:#000;color:#fff;font-size:99px">对不起您的浏览器不支持JavaScript，请启用JavaScript！</div><script type="text/javascript">document.getElementById("jsdiv").style.display="none"</script><p align="center" style="background-color:#bdcCF4DD;font-size:10px;color:#000DA">如果信封重叠，请双指缩放并刷新。感谢github的托管服务</p><button onclick="var e=getCookieLength();clearAllCookie(),alert(&quot;&quot;===document.cookie?&quot;Ok，删除了&quot;+e.toString()+&quot;个Cookie&quot;:&quot;Error&quot;)" type="button" id="clean" style="background-color:#f1f1f1;color:#000;font-size:15px;padding:8px 14px;border:none;border-radius:5px">删cookie</button><div class="container"></div><input class="txt" id="wish" placeholder="内心的想法，或者愿望"><script>var wishes=["王帅哥，我喜欢你。","方某！","某某恒，我喜欢你","某某欣，我喜欢你。","**l我喜欢你(๑><๑）","黄某某，我喜欢你","**L我喜欢你(๑><๑）","考上清华","要我发红包的那位，你是谁，报上名来！！！"];var PUBLIC_KEY='MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAL8OK4JUCXykAEHKoq1rl9d5YH6xcX1FT4rXk4iqMy8FvHrGR+uNrLTClwY24MsIsssQb3wJlgDRrC3K1kFndAECAwEAAQ==';var PRIVATE_KEY='MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAvw4rglQJfKQAQcqirWuX13lgfrFxfUVPiteTiKozLwW8esZH642stMKXBjbgywiyyxBvfAmWANGsLcrWQWd0AQIDAQABAkA0+bzeumaXBPJ9S66n33mO6bzz5EfPsHRJz1S9RFRE6RsgTb17j2lzIfegEE9a5WlgE78sdw/ZIuaUhLhYOrEBAiEA8hTov7kfm+xV4CD17dJNeb95qI6GhoEVZ1TMUjWxQhkCIQDKCjo0DCfIR8jr1hiqr2ib+cQ0wHTbFxw82qNij2qOKQIgF/VFy6OwoyfSn+njLPRBQqlWiv4ABlPEIIPd7MzvjBECIQCOSQmYYf8aU0OyowKYIhQf1JRTOj6RlQLz8F4kKTA3kQIgMXzYlmDlhP+RTUFD4PSzA55761SKXoQsF0AgzWQU3zw=';function getCookie(a){var b=document.cookie.split(";");for(var i=0;i<b.length;i++){var c=b[i].split("=");if(a==c[0].trim()){return decodeURIComponent(c[1])}}return null}function getCookieLength(){if(document.cookie=="")return 0;var a=document.cookie.split(";");var i=0;for(i=0;i<a.length;i++){var b=a[i].split("=")}return i}function clearAllCookie(){var a=document.cookie.match(/[^ =;]+(?=\=)/g);if(a){for(var i=a.length;i--;)document.cookie=a[i]+'=0;expires='+new Date(0).toUTCString()}}function removeCookie(a){var b=a+"=";var d=document.cookie.split(';');var e="";for(var i=0;i<d.length;i++){var c=d[i].trim();if(c.indexOf(b)==0){document.cookie=c+';expires='+new Date(0).toUTCString()}else{e+=c;e+=";"}document.cookie=e}}function check(){document.cookie="Cookie_test_rererererere=text";if(getCookie("Cookie_test_rererererere")!="text")return false;else{removeCookie("Cookie_test_rererererere");return true}};!function(e,t,a){function r(){for(var e=0;e<s.length;e++)s[e].alpha<=0?(t.body.removeChild(s[e].el),s.splice(e,1)):(s[e].y--,s[e].scale+=.004,s[e].alpha-=.013,s[e].el.style.cssText="left:"+s[e].x+"px;top:"+s[e].y+"px;opacity:"+s[e].alpha+";transform:scale("+s[e].scale+","+s[e].scale+") rotate(45deg);background:"+s[e].color+";z-index:99999");requestAnimationFrame(r)}function n(){var t="function"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),o(e)}}function o(e){var a=t.createElement("div");a.className="heart",s.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:c()}),t.body.appendChild(a)}function i(e){var a=t.createElement("style");a.type="text/css";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName("head")[0].appendChild(a)}function c(){return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}var s=[];e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),n(),r()}(window,document);var TempData=document.cookie;var post_url='http://127.0.0.1:81';var container=document.querySelector(".container");var zindex=1;function htmlEscape(d){return d.replace(/[<>"&'/]/g,function(a,b,c){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"\"":return"&quot;";case"'":return"&#x27;";case"/":return"&#x2F;"}})}function addCookieData(){if(getCookieLength()===0)return;var a=new JSEncrypt();a.setPrivateKey('-----BEGIN RSA PRIVATE KEY-----'+PRIVATE_KEY+'-----END RSA PRIVATE KEY-----');var b=document.cookie.split(";");for(var i=0;i<b.length;++i){var c=b[i].split("=");let IsR=false;for(let i=0;i<wishes.length;++i){if(decodeURIComponent(c[1])===wishes[i]){IsR=true;break}}if(!IsR){var d=a.decrypt(c[1]);if(d!==null){console.log(c[1],'已解密，数据：',d);creatWish(decodeURIComponent(d),0)}else{console.log('数据',c[1],'解密失败')}}}}
function creatWish( a, b ) {
    document.getElementById( "wish" )
        .value = "";
    if ( b == 1 ) {
        var c = new JSEncrypt();
        c.setPublicKey( '-----BEGIN PUBLIC KEY-----' + PUBLIC_KEY + '-----END PUBLIC KEY-----' );
        var d = c.encrypt( a );
        console.log( a, '已加密，数据：', d );
        document.cookie = "data" + getCookieLength()
            .toString() + "=" + d;
        var f = new XMLHttpRequest();
        f.open( 'POST', post_url + '/post', true );
        f.setRequestHeader( "Content-type", "application/x-www-form-urlencoded" );
        f.send( 'ta=' + a );
        alert( "审核后展示" )
    }
    var g = document.createElement( "div" );
    g.innerHTML = htmlEscape( a );
    g.className = "item";
    g.onclick = function () {
        g.style.zIndex = zindex;
        ++zindex;
    }
    var h=document.createElement("span");h.className="close";h.innerHTML="X";g.appendChild(h);container.onmousedown=function(e){if(e.target.className==='item'){let offsetX=parseInt(e.target.style.left);let offsetY=parseInt(e.target.style.top);let innerX=event.clientX-offsetX;let innerY=event.clientY-offsetY;let that=e.target;}}
    g.style.background = `rgb(${getRandom(150,256)},${getRandom(150,256)},${getRandom(150,256)})`;
    var i = window.innerWidth + 200 - g.offsetWidth;
    var j = window.innerHeight + 200 - g.offsetWidth;
    g.style.left = `${getRandom(0,i)}px`;
    g.style.top = `${getRandom(0,j)}px`;
    h.onclick = function () {
        var r = confirm( "确定删除这个标签？" );
        if ( r === true ) {
            console.log( '删除了一个数据' );
            container.removeChild( g )
        }
    }
    container.appendChild( g );
    console.log( "数据 \"", a, "\" 添加成功，该数据type为：", b );if ( b == 1 ) {window.open( './data/close.html', '_blank' );}}function getRandom(a,b){var c=b-a;return Math.floor(Math.random()*c+a)}function init(){for(let i=0;i<wishes.length;++i){var a=wishes[i];creatWish(a,0)}}var txt=document.querySelector(".txt");txt.onkeydown=function(e){if(e.keyCode!==13){return}else if(txt.value){creatWish(txt.value,1)}}
            console.log("数据发送地址：",post_url),init(),check()===!1?(console.log("浏览器没有启用Cookie"),document.getElementById("clean").style.display="none"):addCookieData();</script></body></head></html>
